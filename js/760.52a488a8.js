"use strict";(self["webpackChunklove"]=self["webpackChunklove"]||[]).push([[760],{4760:function(t,e,s){s.r(e),s.d(e,{default:function(){return m}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("div",{staticClass:"left"},[e("div",{staticClass:"introduce"},[e("span",{staticClass:"imgCon"},[e("img",{attrs:{src:t.publicItem.icon,alt:""}})]),e("div",{staticClass:"flexR"},[e("h1",[t._v(" "+t._s(t.publicItem.name)),e("i",{staticClass:"state"},[t._v(t._s(t._f("status")(t.publicItem.status)))])]),e("span",[t._v("项目编号："),e("i",[t._v("P2022"+t._s(t.publicItem.catagoryId)+t._s(t.publicItem.id))])]),e("span",[t._v("公益类型："),e("em",[t._v(t._s(t.publicClass))])]),e("div",{staticClass:"FWObject"},[e("span",{staticClass:"FWObjectLeft"},[t._v("服务对象：")]),e("span",{staticClass:"FWObjectRight"},t._l(t.publicItem.targets,(function(s){return e("em",{key:s.id},[t._v(t._s(s.name))])})),0)])])]),e("div",{staticClass:"progress"},[e("div",{staticClass:"integral"},[e("span",[t._v("计划筹集积分："),e("i",[t._v(t._s(t.publicItem.needIntergral))])]),e("span",[t._v("已筹集积分："),e("i",[t._v(t._s(t.publicItem.receiveIntergral))])]),e("span",[t._v("我的爱心积分值："),e("i",[t._v(t._s(t.member.integration))])])]),e("div",{staticClass:"itemProgress"},[e("span",[e("h4",[t._v("当前项目筹集进度：")]),t.publicItem.percentage?e("el-progress",{attrs:{"text-inside":!0,"stroke-width":26,percentage:t.publicItem.percentage,color:t.colors}}):t._e()],1),e("span",[e("h4",[t._v("积分捐献：")]),e("el-input",{attrs:{placeholder:"请输入捐献的积分数"},model:{value:t.integralDonate,callback:function(e){t.integralDonate=t._n(e)},expression:"integralDonate"}},[e("el-button",{attrs:{slot:"append"},on:{click:t.subDonate},slot:"append"},[t._v("捐 献")])],1)],1)])]),e("div",{staticClass:"project"},[0!=t.publicItem.status?e("el-button",{staticClass:"addReport",attrs:{type:"danger"},on:{click:function(e){t.dialogFormVisible=!0}}},[t._v("举报")]):t._e(),e("el-dialog",{attrs:{title:"举报信息",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[e("el-form",[e("el-form-item",{attrs:{"label-width":"0"}},[e("el-input",{attrs:{type:"textarea",rows:5,placeholder:"请输入举报信息"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("提 交")])],1)],1),e("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[e("el-tab-pane",{attrs:{label:"项目详情",name:"first"}},[e("p",[t._v(t._s(t.publicItem.desp))])]),0!=t.publicItem.status?e("el-tab-pane",{attrs:{label:"项目落实进展",name:"second"}},[e("div",{staticClass:"block"},[e("el-timeline",[e("el-timeline-item",{attrs:{timestamp:"2023/4/8 20:46:20",placement:"top"}},[e("el-card",{staticClass:"cardProgress"},[e("h3",[t._v('"'+t._s(t.publicItem.name)+'"公益项目正式落地实施')]),e("p",[t._v(' "'+t._s(t.publicItem.name)+'"公益项目正式落地实施，您可以在此关注，该公益下一步动态 ')])])],1),e("el-timeline-item",{attrs:{timestamp:"2023/4/10 10:12:20",placement:"top"}},[e("el-card",{staticClass:"cardProgress"},[e("h3",[t._v('"'+t._s(t.publicItem.name)+'"公益项目进度')]),e("p",[t._v(' "'+t._s(t.publicItem.name)+'"公益项目正式落地实施后，我方今天正式派工作人员去调用捐献物资 ')]),e("img",{attrs:{src:s(1348),alt:""}})])],1)],1)],1)]):t._e()],1)],1)]),e("div",{staticClass:"right"},[e("div",{staticClass:"source"},[e("h2",[t._v("项目发起方")]),e("div",{staticClass:"sourceIntro"},[e("img",{attrs:{src:t.publicItem.sponsorImg,alt:""}}),e("div",[e("span",[t._v(t._s(t.publicItem.sponsor))]),e("i",[t._v("地址："),e("em",[t._v(t._s(t.publicItem.address))])])])])]),e("div",{staticClass:"contacts"},[e("h2",[t._v("项目联系人")]),e("div",{staticClass:"detailContacts"},[e("div",[t._v(t._s(t.publicItem.contactName))]),e("span",[t._v("手机："+t._s(t.publicItem.contactPhone))]),e("span",[t._v("邮箱："+t._s(t.publicItem.email))])])])])])},a=[],r=(s(7658),s(3822)),l={name:"PublicItem",data(){return{integralDonate:"",dialogFormVisible:!1,activeName:"first",colors:[{color:"#ff4949",percentage:25},{color:"#e6a23c",percentage:50},{color:"#20a0ff",percentage:75},{color:"#13ce66",percentage:100}],mockPublic:{address:"广东省湛江市坡头区",catagoryId:1001,contactName:"黄库福",contactPhone:"038-134865721",desp:"该公益始终致力于推动困境儿童及青少年财经素养教育。公益落地后，会基于“以儿童为中心”的教育理念，结合经济生活的多元场景，开发系列线上线下的财经素养教育产品，通过培训学校和社区教育工作者，开展相关议题研究倡导，共同推动财经素养教育的发展，将为全国30个省市255个区县超过812万人次困境儿童及青少年提供了财经素养教育服务，旨在加强低收入家庭的生活风险防范意识、提升青少年的生存适应力、激发未来财务规划能力，希望培养独立、有温度、有担当的经济公民。",email:"1984563257@qq.com",icon:"./images/yushe.png",name:"阿福童财经素养教育",id:50,needIntergral:5e3,rate:20,receiveIntergral:2080,sponsor:"官渡镇青年志愿服务队",sponsorImg:"./images/zhiyuan.png",status:0,targets:[{id:15,name:"儿童"},{id:17,name:"青少年"}]}}},methods:{subDonate(){if(null==this.$store.state.user.token){let t=this.$route.path;this.$router.push("/login?redirect="+t),this.$message({message:"请您先登录，再执行该操作！！！",type:"warning"})}else if(""==this.publicRightItem)this.$message({message:"对不起，该公益项目捐献功能还没开启！",type:"warning"});else if(this.publicRightItem.needIntergral>this.publicRightItem.receiveIntergral)if(this.member.integration>=this.integralDonate){let t=!1,e=this.publicRightItem.needIntergral-this.publicRightItem.receiveIntergral;this.integralDonate>e&&(this.integralDonate=e,t=!0);let s={integration:this.integralDonate,itemId:this.publicRightItem.id,itemName:this.publicRightItem.name,memberId:this.member.userId},i=this.member.integration-this.integralDonate;this.$store.dispatch("getIntegration",s);const a=JSON.parse(localStorage.getItem("MEMBER"));a.integration=i,a.donationNumber+=1,localStorage.setItem("MEMBER",JSON.stringify(a)),this.$store.state.user.member.integration=i,this.$store.state.user.member.donationNumber+=1,this.integralDonate="",setTimeout((()=>{let t=this.$route.query.id;this.$store.dispatch("getItem",t)}),0),t?this.$message({message:`积分捐献成功，由于您想要捐献的积分大于已经筹集的积分，多余积分已退还你账号，实际您捐献了${e}分！！！`,type:"success"}):this.$message({message:"积分捐献成功，谢谢你对该公益项目的支持！！！",type:"success"})}else this.$message({message:"谢谢您对该公益项目的支持，但是您的爱心积分不足",type:"warning"});else this.$message({message:"谢谢您对该公益项目的支持，该项目积分已筹集，不需要再捐献",type:"warning"})}},filters:{status(t){return 0==t?"筹备中":1==t?"运行中":2==t?"已结项":void 0}},watch:{integralDonate:{handler(t,e){(t<=0||isNaN(t))&&(this.integralDonate="")}}},mounted(){this.$store.dispatch("getItemCatagory");let t=this.$route.query.id;void 0!=t&&this.$store.dispatch("getItem",t)},computed:{...(0,r.rn)({publicRightItem:t=>t.publicItem.item||[],itemCatagory:t=>t.publicWelfare.itemCatagory||[],member:t=>t.user.member}),publicClass(){for(let t=0;t<this.itemCatagory.length;t++)if(this.itemCatagory[t].id===this.publicItem.catagoryId)return this.itemCatagory[t].name;return null},publicItem(){if(this.$route.query.id){let t=parseFloat((this.publicRightItem.receiveIntergral/this.publicRightItem.needIntergral*100).toFixed(2));return this.publicRightItem.percentage=t,this.publicRightItem,this.publicRightItem}return this.mockPublic}},watch:{publicItem:{handler(t,e){t==[]&&(t=this.mockPublic)}}}},n=l,c=s(1001),o=(0,c.Z)(n,i,a,!1,null,"ddee2c4e",null),m=o.exports},1348:function(t,e,s){t.exports=s.p+"img/donate.3a1d661b.png"}}]);