"use strict";(self["webpackChunklove"]=self["webpackChunklove"]||[]).push([[537],{6537:function(e,s,t){t.r(s),t.d(s,{default:function(){return g}});var r=function(){var e=this,s=e._self._c;return s("div",{staticClass:"container"},[s("img",{attrs:{src:t(5354),alt:""}}),s("div",{staticClass:"login"},[s("h1",[e._v("账号登录")]),s("el-form",{staticClass:"demo-ruleForm",attrs:{model:e.formInfo,rules:e.rules,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"手机号:",prop:"loginacct"}},[s("el-input",{attrs:{type:"number",placeholder:"请输入手机号"},model:{value:e.formInfo.loginacct,callback:function(s){e.$set(e.formInfo,"loginacct",s)},expression:"formInfo.loginacct"}})],1),0==e.changeIndex?s("el-form-item",{attrs:{label:"密码:",prop:"password"}},[s("el-input",{attrs:{placeholder:"请输入密码","show-password":""},model:{value:e.formInfo.password,callback:function(s){e.$set(e.formInfo,"password",s)},expression:"formInfo.password"}})],1):e._e(),1==e.changeIndex?s("el-form-item",{attrs:{label:"验证码:",prop:"code"}},[s("el-input",{attrs:{type:"number",placeholder:"请输入验证码"},model:{value:e.formInfo.code,callback:function(s){e.$set(e.formInfo,"code",s)},expression:"formInfo.code"}}),s("button",{staticClass:"btn",on:{click:function(s){return e.subCode(s)}}},[e._v("获取验证码")])],1):e._e()],1),s("div",{staticClass:"loginPage"},[s("button",{staticClass:"change",on:{click:function(s){return e.changeLogin(s)}}},[e._v(" 切换-验证码登录 ")]),s("span",{staticClass:"register"},[e._v(" 还没账号， "),s("router-link",{attrs:{to:"/register"}},[e._v("立即注册")])],1)]),s("button",{staticClass:"sub",on:{click:e.submitLogin}},[e._v("登    录")])],1)])},o=[],i=(t(7658),t(3822)),n={name:"Login",data(){var e=(e,s,t)=>{if(""===s)this.peopleTel=!1,t(new Error("手机号不可为空"));else if(""!==s){var r=/^1[3-9]\d{9}$/;if(r.test(s))return this.peopleTel=!0,t();this.peopleTel=!1,t(new Error("请输入有效的手机号码"))}};return{rules:{loginacct:[{required:!0,message:"请输入手机号（11位数字）",trigger:"blur"},{validator:e,min:11,max:11,message:"手机号输入错误（11位数字）",trigger:"blur"}],password:[{required:!0,message:"请输入密码（6-16位数字、符号和字母组成）",trigger:"blur"},{min:1,max:16,message:"密码输入错误（6-16位数字、符号和字母组成）",trigger:"blur"}],code:[{required:!0,message:"请输入验证码（6位数字）",trigger:"blur"},{min:6,max:6,message:"验证码格式错误（6位数字）",trigger:"blur"}]},changeIndex:0,formInfo:{code:"",loginacct:"",password:""},peopleTel:!1}},methods:{submitLogin(){1==this.peopleTel&&""!=this.formInfo.code&&""!=this.formInfo.loginacct||1==this.peopleTel&&""!=this.formInfo.password&&""!=this.formInfo.loginacct?(this.$store.dispatch("getLogin",this.formInfo),setTimeout((()=>{if(500==this.loginCODE||null==this.member||10002==this.loginCODE)void 0!=this.loginMSG?this.$message.error(this.loginMSG):this.$message.error("登录失败，可能是您的网络或者是我方服务器的问题"),this.$store.state.user.loginInfo={};else{let e=this.$route.query.redirect||"/home";this.$router.push(e),this.$message({message:"登录成功",type:"success"})}}),800)):this.$message.error("请检查是否输入正确")},subCode(e){if(1==this.peopleTel&&""!=this.formInfo.loginacct)if(this.$store.dispatch("getSendcode",this.formInfo.loginacct),1e5==this.loginCODE)this.$message({message:this.loginMSG,type:"warning"});else{this.$message({message:"验证码发送成功，请接收",type:"success"});let t=59;e.target.disabled=!0;var s=setInterval((function(){0==t?(clearInterval(s),e.target.disabled=!1,e.target.innerText="获取验证码"):(e.target.innerText=`${t}s后重发`,t--)}),1e3)}else this.$message.error("请您先输入手机号！！！")},changeLogin(e){0==this.changeIndex?(e.target.innerText="切换-密码登录",this.changeIndex=1,this.formInfo.password=""):1==this.changeIndex&&(e.target.innerText="切换-验证码登录",this.changeIndex=0,this.formInfo.code="")}},computed:{...(0,i.rn)({loginMSG:e=>e.user.loginInfo.msg,loginCODE:e=>e.user.loginInfo.code,member:e=>e.user.member})}},a=n,l=t(1001),c=(0,l.Z)(a,r,o,!1,null,"100d7853",null),g=c.exports},5354:function(e,s,t){e.exports=t.p+"img/bgc.8db995e9.png"}}]);